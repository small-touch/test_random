"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[658],{776:function(q,F,s){s.r(F),s.d(F,{default:function(){return L}});var N=s(90228),c=s.n(N),R=s(87999),C=s.n(R),$=s(48305),v=s.n($),i=s(75271),h=s(86639),S=s(45292),P=s(27130),T=s(45879),m=s(93966),l={container:"container___wL12H",selectButton:"selectButton___XdVCo",inputContainer:"inputContainer___L8neo",selectButton1:"selectButton1___CeISe",result:"result___VURgI",menu:"menu___tkuqc",menuItem:"menuItem___SVK5c",close:"close___jn2BM",tip:"tip___Qo71t"},r=s(52676);m.Z.defaults.baseURL="http://localhost:3000/";var V=function(){var j=(0,i.useRef)(null),M=(0,i.useState)("\u70B9\u51FB\u6309\u94AE\u5F00\u59CB\u9009\u62E9"),Z=v()(M,2),G=Z[0],U=Z[1],k=(0,i.useState)([]),y=v()(k,2),f=y[0],H=y[1],K=(0,i.useState)(""),B=v()(K,2),g=B[0],A=B[1],O=(0,i.useState)(!1),E=v()(O,2),Q=E[0],p=E[1],X=(0,i.useState)("#000"),I=v()(X,2),z=I[0],J=I[1],D=function(){var n=C()(c()().mark(function a(){var t,u;return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,m.Z.get("/api/dishes/getAllDishes");case 2:u=d.sent,H(u==null||(t=u.data)===null||t===void 0?void 0:t.data);case 4:case"end":return d.stop()}},a)}));return function(){return n.apply(this,arguments)}}();(0,i.useEffect)(function(){D()},[]);var W=function(){var a=f[Math.floor(Math.random()*f.length)];a&&setTimeout(function(){U("\u4ECA\u5929\u5403\uFF1A".concat(a==null?void 0:a.name))},200)},Y=function(){var n=C()(c()().mark(function a(t){var u,o;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.post("/api/dishes/deleteDish",{name:t==null?void 0:t.name});case 3:o=e.sent,((u=o.data)===null||u===void 0?void 0:u.code)===200&&(h.ZP.success("\u5220\u9664\u6210\u529F"),D()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h.ZP.error("\u5220\u9664\u5931\u8D25");case 10:case"end":return e.stop()}},a,null,[[0,7]])}));return function(t){return n.apply(this,arguments)}}(),w=function(){var n=C()(c()().mark(function a(){var t,u,o;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p(!0),g){e.next=4;break}return p(!1),e.abrupt("return",h.ZP.error("\u8BF7\u8F93\u5165\u83DC\u54C1\u540D\u79F0"));case 4:return e.prev=5,e.next=8,m.Z.post("/api/dishes/addDishes",{name:g});case 8:u=e.sent,((t=u.data)===null||t===void 0?void 0:t.code)===200&&(p(!1),h.ZP.success("\u6DFB\u52A0\u6210\u529F"),A(""),D()),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),p(!1),h.ZP.error((o=e.t0.response.data)===null||o===void 0?void 0:o.message);case 16:case"end":return e.stop()}},a,null,[[5,12]])}));return function(){return n.apply(this,arguments)}}(),x=function(a){A(a.target.value)};function b(){var n="#"+(Math.random()*16777215<<0).toString(16);return n}return(0,i.useEffect)(function(){return j.current=setInterval(function(){J(b())},300),function(){j.current=null}},[]),(0,r.jsxs)("div",{className:l.container,children:[(0,r.jsx)("h1",{children:"\u968F\u673A\u70B9\u83DC\u5DE5\u5177"}),(0,r.jsx)("div",{className:l.result,children:G}),(0,r.jsx)(S.ZP,{className:l.selectButton,type:"primary",onClick:W,children:"\u968F\u673A\u9009\u62E9"}),(0,r.jsxs)("div",{className:l.inputContainer,children:[(0,r.jsx)(P.Z,{value:g,placeholder:"\u8BF7\u8F93\u5165",onChange:x}),(0,r.jsx)(S.ZP,{loading:Q,className:l.selectButton1,type:"primary",onClick:w,children:"\u65B0\u589E\u83DC\u54C1"})]}),(0,r.jsx)("div",{className:l.menu,children:f==null?void 0:f.map(function(n,a){return(0,r.jsxs)("div",{className:l.menuItem,children:[n==null?void 0:n.name," ",(0,r.jsx)(T.Z,{onClick:function(){return Y(n)},className:l.close})]},a)})}),(0,r.jsx)("p",{className:l.tip,style:{color:z},children:"\u4EBA\u662F\u94C1\uFF0C\u996D\u662F\u94A2\uFF0C\u4E00\u987F\u4E0D\u5403\u997F\u7684\u614C\uFF01"})]})},L=V}}]);
